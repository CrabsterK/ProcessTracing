@model ProcessTracing.Models.TestModel

<script src="~/Scripts/Chart.js"></script>
<div id="charts" class="siteContent chartsPage">

    <div class="row">
        <div class="col-sm">
            <div class="product_price">
                <span class="price-tax"><b>Listy z Twojej tablicy</b></span>
                <br />
                <ul>
                    @foreach (var item in Model.listOfCards)
                    {
                        <li>@item</li>
                    }
                </ul>
            </div>
        </div>

        <div class="col-sm">
            <div class="product_price">
                <span class="price-tax"><b>Ilość użytkowników przypisanych do tablicy</b></span>
                <br>
                <h1 class="price">@Model.boardMembertsQty</h1>
            </div>
        </div>

        <div class="col-sm">
            <div class="product_price">
                <span class="price-tax"><b>Ilość kart przypisanych do użytkowników</b></span>
                <br>
                <ul>
                    @*
                    @foreach (var item in Model.usersCardsQty)
                    {
                        <li>@item.MemberName ---- @item.CardQuantity</li>
                    }
                        *@
                </ul>

            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm">
            <canvas id="pieChart"></canvas>
            <script>
                new Chart(document.getElementById("pieChart"), {
                    type: 'pie',
                    data: {
                        labels: [@foreach (var item in Model.listsCardsQty){<text>"</text>@item.ListName<text>",</text>}],
                        datasets: [{
                                label: "Population (millions)",
                            backgroundColor: ["#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850"],
                            data: [@foreach (var item in Model.listsCardsQty){<text>"</text>@item.CardQuantity<text>",</text>}]
                        }]
                    },
                    options: {
                        responsive: true,
                        title: {
                            display: true,
                            text: 'Ilość kart przypisanych do użytkowników tablicy'
                        }
                    }
                });
            </script>
        </div>
    </div>
    <div class="row">
        <div class="col-sm">
            <div class="product_price">
                <span class="price-tax"><b>Lista z największą ilością kart </b></span>
                <br>
                <h1 class="price">@Model.mostCardsListName - @Model.mostCardsListQty</h1>
            </div>
        </div>

        <div class="col-sm">
            <div class="product_price">
                <span class="price-tax">Data i czas stworzenia listy <b>@Model.listCreateName</b></span>
                <br>
                <h1 class="price">@Model.listCreateDate</h1>

            </div>
        </div>
        <div class="col-sm">
            <div class="product_price">
                <span class="price-tax"><b>Puste listy</b></span>
                <br>
                <ul>
                    @if (Model.emptyLists.Count == 0)
                    {
                        <p>Brak pustych list</p>
                    }
                    else
                    {
                        foreach (var item in Model.emptyLists)
                        {
                            <li>@item</li>
                        }
                    }

                </ul>

            </div>
        </div>
        @*@
        <div class="col-sm">
            <div class="product_price">
                <span class="price-tax">Tygodnie</span>
                <br>
                @foreach (var item in Model.tyg)
                {
                    @item<text><br /></text>
                }

            </div>
        </div>
        *@
    </div>
    
    <div class="row">
        <div class="col-sm">
            <canvas id="pieChart2"></canvas>
            <script>
                new Chart(document.getElementById("pieChart2"), {
                    type: 'pie',
                    data: {
                        labels: [@foreach (var item in Model.amountOfCardsActions){<text>"</text>@item.Key<text>",</text>}],
                        datasets: [{
                                label: "Population (millions)",
                            backgroundColor: ["#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850"],
                            data: [@foreach (var item in Model.amountOfCardsActions){<text>"</text>@item.Value<text>",</text>}]
                        }]
                    },
                    options: {
                        responsive: true,
                        title: {
                            display: true,
                            text: 'Ilość akcji na kartach pogrupowane według użytkowników'
                        }
                    }
                });
            </script>
        </div>
    </div>
    
    <div class="row">
        <div class="col-sm">
            <div class="product_price">
                <canvas id="bar-chart-grouped" width="800" height="450"></canvas>
                <script>
                    new Chart(document.getElementById("bar-chart-grouped"), {
                        type: 'bar',
                        data: {
                          labels: [@foreach(var week in @Model.sortedWeeks) { <text>"</text>@week<text>",</text>}],
                          datasets: [
	                    @foreach (var item in Model.listOfAmountOfActionsByTime) { <text>{ label: "</text> @item.member <text>", backgroundColor: getRandomColor(),data: [</text> foreach (var amountOfWeek in item.amountOfActions) {@amountOfWeek<text>,</text>}<text>]},</text>}
                          ]
                        },
                        options: {
                          title: {
                            display: true,
                            text: 'Ilość akcji wykonanych przez każdego z użytkowników w czasie (tygodnie)'
                          }
                        }
                    });
                    function getRandomColor() {
                        var letters = '0123456789ABCDEF';
                        var color = '#';
                        for (var i = 0; i < 6; i++) {
                            color += letters[Math.floor(Math.random() * 16)];
                        }
                        return color;
                    }
                </script>
            </div>
        </div >
    </div >
</div >
